# initiation test.
FROM ubuntu:16.04
MAINTAINER shaddar <shaddar45@gmail.com>
# Install
RUN \
  apt-get update && \
  apt-get -y upgrade && \
  apt-get install -y build-essential && \
  apt-get install -y build-essential && \
  apt-get install -y software-properties-common && \
  apt-get install -y net-tools && \
  apt-get install -y nginx && \
  apt-get install -y curl && \
  apt-get install -y man && \
  apt-get install -y nano

EXPOSE 8081
RUN mkdir -p /home/shaddar/geoip
WORKDIR /home/shaddar

#Point 1
COPY /scripts/openFileLimit /home/shaddar/
RUN chmod +x openFileLimit && ./openFileLimit
#one of many attempts to change containers openFile limit.(one line below)         
COPY /configFiles/file-max /proc/sys/fs/file-max

#Point 2
COPY /scripts/fetchIpGeo /home/shaddar
RUN chmod +x fetchIpGeo && ./fetchIpGeo

#Point 3
COPY /configFiles/nginx.conf /etc/nginx/nginx.conf
#Attempt 1
COPY /scripts/start.sh /home/shaddar/
RUN chmod +x start.sh && ./start.sh
#Attempt 2
COPY /scripts/startNginx /home/shaddar
RUN chmod +x startNginx && ./startNginx

#CMD ["nginx", "-g", "daemon on;"]



